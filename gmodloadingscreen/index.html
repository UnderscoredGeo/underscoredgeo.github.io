<!DOCTYPE html>
<head>
  <script type="text/javascript">
    var isFocused = false;
    var canPlayThrough = false;
    window.addEventListener('focus', (event) => {
      console.log("Focused")
      if (canPlayThrough == true) {
        document.querySelector('audio').play();
      } else {
        isFocused = true;
      };
    });
    window.addEventListener('click', (event) => {
      console.log("Clicked")
      if (canPlayThrough == true) {
        document.querySelector('audio').play();
      } else {
        isFocused = true;
      };
    });
    function onCanPlay() {
      document.querySelector('audio').volume = 0.5;
      console.log("Can play through");
      if (isFocused == true) {
        document.querySelector('audio').play();
      } else {
        canPlayThrough = true;
      };
    };
  </script>
</head>
<body>
  <audio oncanplaythrough="onCanPlay()" controls volume="0.5" autoplay>
    <source src="audio.mp3" type="audio/mpeg">
  </audio>
</body>
